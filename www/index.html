<!DOCTYPE html>
<html>
	<head>
		<link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>Safari Feed</title>
		<meta name="author" content="Andrew Laskey">
		<meta name="description" content="Real-time updates on what is happening in the San Diego Zoo">
		<link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon">
		<link rel="stylesheet" href="css/style.css" type="text/css">
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-43132562-1', 'safarifeed.com');
			ga('send', 'pageview');

		</script>
	</head>
	<body>
		<header class="SiteHeader">
			<h1 class="SiteHeader-name">Safari Feed</h1>
			<button id="update" type="button" class="SiteHeader-button update" type="button"><i class="icon-bubble"></i></button>
			<button id="settings" type="button" class="SiteHeader-button" type="button"><i class="icon-cog"></i></button>
			<button id="refresh" type="button" class="SiteHeader-button" type="button"><i class="icon-spinner"></i></button>
		</header>

		<section class="FillSection FillSection--map">
		  
			<div id="map"></div>

			<div class="Comments">

				<!-- <div id="last-update" class="LastUpdate u-centerWrap">
					<div class="LastUpdate-sentiment"><i class="icon-smiley u-textGamma"></i></div>
					<div class="LastUpdate-comment">Update...</div>
				</div> -->

				<div id="comment" class="AddComment u-centerWrap">
					<input id="jingle" type="text" value="" placeholder="Whats happening?" />
					<input id="email" type="text" value="" placeholder="Email" /><!-- spam prevention -->
					<div class="AddComment-buttons">
						<button id="pos" name="pos" type="button" class="u-textAlpha js-postUpdate" data-sentiment="pos"><i class="icon-smiley"></i></button>
						<button id="neg" name="neg" type="button" class="u-textAlpha js-postUpdate" data-sentiment="neg"><i class="icon-sad"></i></button>
					</div>
				</div>

				<div id="comment-processing" class="Comments-thinking u-animateFlipContainer">
					<div class="u-animateFlip">
						<i class="icon-bubble2 u-textAlpha"></i>
					</div>
				</div>

			</div>

		</section>

		<section id="settings-panel" class="FillSection FillSection--info is-hidden">
			<div class="u-centerWrap">
			<h2>What's Safari Feed?</h2>
				<p>Safari feed gives you real-time updates of what is happening in the San Diego Zoo. Submit your own updates to let others know where the action is.</p>
				<h2>Adding Updates</h2>
				<p> Click the <i class="icon-bubble"></i> comment button in the top right. The blue marker shows your current position as accurately as your mobile browser can determine. If it's off, drag it to your exact spot. Write a brief note and submit the update with either the postive, <i class="icon-smiley u-positive"></i>, or negative, <i class="icon-sad u-negative"></i> button depending on your message.</p>
				<ul class="Examples">
					<li class="u-textDelta"><i class="icon-smiley u-positive"></i>The lions are feeding!</li>
					<li class="u-textDelta"><i class="icon-sad u-negative"></i>The monkey exhibit is closed.</li>
				</ul>
				<h2>History</h2>
				<p>Toggling "Historic Activity" overlays a heatmap of every submitted positive comment for the current hour of the day.</p>
				<p>Animals have regular schedules, so if the Snow Leopoards play every day at 3PM, you should be able to glean that from the historic layer.</p>
				<p>Safari Feed is brand new, however, and this historic data is from updates by users like you. The more we update the more we help each other out.</p>
				<h2>Support</h2>
				<p>Contribute to this project on <a href="https://github.com/andrewlaskey/safari-feed" title="Safari Feed Github Repository" target="_blank">Github</a></p>
			</div>
		</section>

		<script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script>
		<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
		<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
		<script src="js/geoposition.js"></script>
		<script type="text/js-worker">
		/**
		 * Copyright 2010 Sun Ning <classicning@gmail.com>
		 *
		 * Permission is hereby granted, free of charge, to any person obtaining a copy
		 * of this software and associated documentation files (the "Software"), to deal
		 * in the Software without restriction, including without limitation the rights
		 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 * copies of the Software, and to permit persons to whom the Software is
		 * furnished to do so, subject to the following conditions:
		 *
		 * The above copyright notice and this permission notice shall be included in all
		 * copies or substantial portions of the Software.
		 *
		 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
		 * SOFTWARE.
		 */
		onmessage=function(a){calc(a.data)};function calc(b){value=b.value||{};degree=b.degree||1;for(var f in b.data){var c=b.data[f];var d=Math.floor(Math.pow((c/b.step),1/degree));var j=Math.floor(f%b.width);var g=Math.floor(f/b.width);for(var i=j-d;i<j+d;i+=1){if(i<0||i>b.width){continue}for(var h=g-d;h<g+d;h+=1){if(h<0||h>b.height){continue}var e=Math.sqrt(Math.pow((i-j),2)+Math.pow((h-g),2));if(e>d){continue}else{var k=c-b.step*Math.pow(e,degree);var a=i+h*b.width;if(value[a]){value[a]=value[a]+k}else{value[a]=k}}}}}postMessage({value:value})};
		</script>
		<script src="js/app.js"></script>
	</body>
</html>
